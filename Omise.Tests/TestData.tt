<#@ template language="C#" hostspecific="true" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#
    var path = Host.TemplateFile.Replace("TestData.tt", "../testdata");
    path = Path.GetFullPath(path);

    var files = new DirectoryInfo(path)
        .GetFiles("*.json", SearchOption.AllDirectories)
        .Select(fi => {
            using (var fs = fi.OpenRead())
            using (var sr = new StreamReader(fs)) {
                var data = Encoding.UTF8.GetBytes(sr.ReadToEnd());
                return new {
                    Info = fi,
                    FullName = fi.FullName,
                    Data = data,
                    RelativePath = fi.FullName.Substring(path.Length + 1)
                };
            }
        })
        .ToList();
#>
// <auto-generated />
// Generated from <#= Host.TemplateFile #>
// on <#= DateTime.Now.ToString() #>
using System;
using System.Collections.Generic;

namespace Omise.Tests {
    public static class TestData {
        public static IDictionary<string, byte[]> Files = new Dictionary<string, byte[]>
        {
<# foreach (var file in files) { #>
            { "<#= file.RelativePath #>", new byte[] { <#= string.Join(",", file.Data.Select(b => b.ToString())) #> } },
<# } #>
        };
    }
}