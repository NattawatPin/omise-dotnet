<#@ template language="C#" hostspecific="true" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#
    var path = Host.TemplateFile.Replace("TestData.tt", "../testdata/objects");
    var files = new DirectoryInfo(path)
        .GetFiles("*.json")
        .Select(fi => {
            using (var fs = fi.OpenRead())
            using (var sr = new StreamReader(fs)) {
                var data = Encoding.UTF8.GetBytes(sr.ReadToEnd());
                return new {
                    Info = fi,
                    FullName = fi.FullName,
                    Data = data
                };
            }
        })
        .ToList();
#>
// <auto-generated />
// Generated from <#= Host.TemplateFile #>
// on <#= DateTime.Now.ToString() #>
namespace Omise.Tests {
    public static class TestData {
        public static class Objects {
<# foreach (var file in files) { #>
            // <#= file.Info.Name #>
            public static byte[] <#= file.Info.Name.Replace(".", "_") #> = new byte[] {
                <#= string.Join(",", file.Data.Select(b => b.ToString())) #>
            };

<# } #>
        }
    }
}